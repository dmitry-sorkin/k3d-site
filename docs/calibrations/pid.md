---
icon: fontawesome/solid/temperature-low
title: Калибровка PID
subtitle: Чтобы температура не колебалась
description: Как подобрать значения PID
---

# Калибровка PID

## Особенности калибровки

В современных 3д принтерах управление температурой происходит с помощью алгоритма [PID](https://ru.wikipedia.org/wiki/%D0%9F%D0%98%D0%94-%D1%80%D0%B5%D0%B3%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80){ target="_blank" }. Для правильной работы PID-регулятора необходимо подобрать (откалибровать) подходящие для хотэнда коэффициенты.

Основные особенности этой калибровки:

1. Значения коэффициентов PID влияют на стабильность поддержания температуры. Следовательно, эту калибровку необходимо делать перед другими, которые зависят от стабильности поддержания температуры: разрешение экструдера, pressure advance, откаты, поток и т.д.;
2. На значения коэффициентов PID влияют только характеристики хотэнда. Поэтому нет каких-то других калибровок, которые следовало бы проводить перед калибровкой PID;
3. Значения PID следует повторно подбирать после внесения значимых изменений в хотэнд. Например, после замены нагревателя или термистора, после перехода на другой тип термобарьера и т.д. Небольшие изменения в хотэнде, например, смена сопла, обычно не требуют перекалибровки значений PID.

## Калибровка PID

### Через экран принтера

![](./pics/pid_marlin_screen.png)

В большинстве современных 3д принтеров, калибровка PID доступна нажатием одной кнопки через экран или веб-интерфейс принтера. В таком случае просто воспользуйтесь этим пунктом меню и следуйте указаниям на экране.

### В прошивке Klipper

1. Передвиньте печатающую голову и стол так, чтобы горячая часть хотэнда не соприкасалась ни с чем в принтере;
2. Для калибровки PID хотэнда введите команду:
```
PID_CALIBRATE HEATER=extruder TARGET=250
```
3. Дождитесь того, как калибровка закончится и в консоль будут выведены полученные коэффициенты PID;
4. Введите команду:
```
SAVE_CONFIG
```
5. Для калибровки PID стола введите команду:
```
PID_CALIBRATE HEATER=heater_bed TARGET=90
```
6. Дождитесь того, как калибровка закончится и в консоль будут выведены полученные коэффициенты PID;
7. Введите команду:
```
SAVE_CONFIG
```

### В прошивке Marlin

1. Подключитесь к принтеру с помощью приложения [Printrun](https://github.com/kliment/Printrun/releases){ target="_blank" } или аналога;
2. Для калибровки PID хотэнда введите команду:
```
M303 E0 S250 C8 U
```
3. Для калибровки PID стола введите команду:
```
M303 E-1 S100 C8 U
```
4. Сохраните полученные данные:
```
M500
```

## ЧаВо

### Как подключиться к принтеру на Marlin?

![](./pics/pid_printrun_connect.png)

Подключение к этим принтерам происходит по последовательному порту. Обычно у таких принтеров выведен USB type B порт, и в комплекте лежит кабель USB type B -> USB type A. Если это так, то:

1. Убедитесь, что в системе установлен [драйвер для CH340](http://wiki.amperka.ru/articles:driver-ch340){ target="blank" };
2. Откройте приложение [Printrun](https://github.com/kliment/Printrun/releases){ target="_blank" };
3. В верхнем левом углу посмотрите какие COM-порты есть в списке (1). После этого подключите принтер и посмотрите, какой порт появился. Выберите его;
4. Выберите бодрейт (2) 250000;
5. Попробуйте подключиться (3);
6. Если не сработало, то попробуйте изменить бодрейт на 115200.

При успешном подключении должно быть написано Connected, и вывод в консоли должен быть адекватным. Дополнительно проверить, всё ли правильно, можно отправив команду `M503`, которая должна заставить принтер вывести свои настройки в виде списка G-код параметров.

### Нестабильная температура после калибровки

Попробуйте провести калибровку еще раз, но при включенном на 50-80% обдуве модели. Если после этого проблема не уходит, то, скорее всего, дело в самом хотэнде. К сожалению, в последнее время всё чаще появляются хотэнды, в том числе и дорогие, у которых термистор прижимается к нагревателю, или недостаточно хорошо прижимается к хитблоку. Из-за этого термистор показывает температуру не довольно инертного хитблока, а нагревателя, температура которого сильно колеблется. Если на хитблоке есть дополнительные отверстия под термистор, располагающиеся вдали от нагревательного элемента, то перенесите термистор в это отверстие. Если такого отверстия нет, то, чаще всего, без слесарной доработки хотэнда исправить проблему не получится. Рассмотрите возможность продать хотэнд и купить ему на замену нормально спроектированный.
